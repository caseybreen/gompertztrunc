[{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"Summary: vignette gives overview gompertztrunc package mortality estimation presents three case-studies illustrating package’s functionality. goal vignette give users high-level overview using gompertztrunc package mortality estimation including use weights, specification visualization models, limitations approach.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"background","dir":"Articles","previous_headings":"","what":"Background","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"Researchers increasingly access administrative mortality records include died limited observation window without information survivors. double truncation absence denominators precludes use conventional tools survival analysis. gompertztrunc package includes tools mortality estimation doubly-truncated datasets without population denominators.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"summary-of-parametric-gompertz-approach","dir":"Articles","previous_headings":"","what":"Summary of Parametric Gompertz Approach","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"method assumes mortality follows parametric model Gompertz model uses maximum likelihood methods estimate underlying mortality distribution. Specifically, hazard individual \\(\\) age \\(x\\) given parameters \\(\\beta\\) given \\[h_i(x | \\beta) = a_0 e^{b_0 x} e^{\\beta Z_i}\\] \\(h(x)\\) hazard age \\(x\\) \\(a_0\\) baseline level mortality \\(b_0\\) gives rate increase mortality \\(Z_i\\) covariates person \\(\\) (e.g., years education, place birth) \\(\\beta\\) set parameters model estimate values \\(\\widehat{}\\), \\(\\widehat{b}\\), \\(\\widehat{\\beta}\\). main function package gompertztrunc::gompertz_mle function, takes following arguments: formula: model formula (example, death_age ~ educ_yrs + homeownership) left_trunc: year upper truncation right_trunc: year lower truncation data: data frame age death variable covariates byear: year birth maxiter maximum number iteration optim function weights person-level weight","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"First, load gompertztrunc package Github.","code":"## install gompertztrunc package from Github install.packages(\"devtools\") devtools::install_github(\"caseybreen/gompertztrunc\") ## library packages library(gompertztrunc)         ## calculate mortality differentials under double-truncation   library(tidyverse)             ## data manipulation and visualization   library(data.table)            ## fast data manipulation library(cowplot)               ## publication-ready themes for ggplot library(socviz)                ## helper functions for data visualization (Kieran Healy)   library(broom)                 ## \"tidy\" model output    ## load data  sim_data <- sim_data           ## simulated  bunmd_demo <- bunmd_demo       ## real"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"case-study-i-simulated-data","dir":"Articles","previous_headings":"","what":"Case Study I: Simulated Data","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"first case study, use simulated (fake) data included Gompertztrunc package. simulated data, know true coefficient values (also know mortality follows Gomeprtz ditsribution proportional hazards assumption holds). Now let’s try running gompertz_mle() function simulated data:  function returns list contains three elements: initial starting parameters MLE routine. starting parameter found using linear regression age death full  object, gives details optimization routine (e.g., whether model converged) data.frame containing estimated Gompertz parameters, coefficients, hazards ratios 95% confidence intervals. recommend always checking full  object make sure model converged. first column gives Gompertz \\(b\\) parameter, second row gives Gompertz mode. Many investigators ultimately report hazard ratios. However, translating hazard ratios difference life expectancy may help facilitate interpretation comparison studies.","code":"## Look at simulated data  head(sim_data) ##    aod byear dyear       temp sex isSouth ## 1:  87  1810  1897 -4.6198501   1       0 ## 2:  78  1810  1888 -0.8841613   1       0 ## 3:  79  1810  1890  0.7566703   1       0 ## 4:  85  1810  1895 -0.6728037   1       0 ## 5:  85  1810  1896 -3.8537981   1       0 ## 6:  81  1810  1891 -1.2885393   1       0 ## What years do we have mortality coverage?  sim_data %>%    summarize(min(dyear), max(dyear)) ##   min(dyear) max(dyear) ## 1       1888       1905 ## run gompertz_mle function   ## returns a list  simulated_example <- gompertztrunc::gompertz_mle(formula = aod ~ temp + as.factor(sex) + isSouth,                                                  left_trunc = 1888,                                                  right_trunc = 1905,                                                  data = sim_data) ## 1. starting value for coefficients (from linear regression) simulated_example$starting_values ##     log.b.start        b0.start            temp as.factor(sex)1         isSouth  ##     -2.30258509     -9.96897213      0.07505734     -0.18001387      0.22607193 ## 2. optim fit object simulated_example$optim_fit ## $par ##     log.b.start        b0.start            temp as.factor(sex)1         isSouth  ##      -2.2745186      -9.4083999       0.2068584      -0.5300299       0.5983461  ##  ## $value ## [1] 17549.16 ##  ## $counts ## function gradient  ##      886       NA  ##  ## $convergence ## [1] 0 ##  ## $message ## NULL ##  ## $hessian ##                 log.b.start  b0.start       temp as.factor(sex)1   isSouth ## log.b.start       283845.66 35822.202 -36549.785       20205.368 14017.009 ## b0.start           35822.20  4536.154  -4552.676        2553.982  1783.017 ## temp              -36549.79 -4552.676  32378.684       -1569.926 -3199.463 ## as.factor(sex)1    20205.37  2553.982  -1569.926        2553.949  1109.978 ## isSouth            14017.01  1783.017  -3199.463        1109.978  1783.000 ## 2. check model convergence (0 == convergence) simulated_example$optim_fit$convergence ## [1] 0 ## 3. Look at model results  simulated_example$results ## # A tibble: 5 × 7 ##   parameter         coef coef_lower coef_upper     hr hr_lower hr_upper ##   <chr>            <dbl>      <dbl>      <dbl>  <dbl>    <dbl>    <dbl> ## 1 gompertz_b       0.103     0.0964      0.110 NA       NA       NA     ## 2 gompertz_mode   69.4      64.4        74.3   NA       NA       NA     ## 3 temp             0.207     0.194       0.219  1.23     1.21     1.25  ## 4 as.factor(sex)1 -0.530    -0.590      -0.470  0.589    0.554    0.625 ## 5 isSouth          0.598     0.536       0.661  1.82     1.71     1.94 ## true coefficient values (we know bc we simulated them) mycoefs <- c(\"temp\" = +.2, \"sex\" = -.5, \"isSouth\" = +.6)  ## compare our estimated values to true value  ## we can only do this because this is simulated (fake) data   simulated_example$results %>%   filter(!stringr::str_detect(parameter, \"gompertz\")) %>%   mutate(true_coef = mycoefs) %>%   select(parameter, coef, coef_lower, coef_upper, true_coef) ## # A tibble: 3 × 5 ##   parameter         coef coef_lower coef_upper true_coef ##   <chr>            <dbl>      <dbl>      <dbl>     <dbl> ## 1 temp             0.207      0.194      0.219       0.2 ## 2 as.factor(sex)1 -0.530     -0.590     -0.470      -0.5 ## 3 isSouth          0.598      0.536      0.661       0.6 ## translate hazard rates to difference in e65 convert_hazards_to_ex(simulated_example$results, age = 65) %>%    select(parameter, e65, e65_lower, e65_upper) ## # A tibble: 3 × 4 ##   parameter         e65 e65_lower e65_upper ##   <chr>           <dbl>     <dbl>     <dbl> ## 1 temp            -1.67     -1.77     -1.57 ## 2 as.factor(sex)1  4.64      4.10      5.19 ## 3 isSouth         -4.55     -4.97     -4.11"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"case-study-ii-real-world-example-with-bunmd-data","dir":"Articles","previous_headings":"","what":"Case Study II: Real-World Example with BUNMD Data","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"second case study, look mortality advantage foreign-born. First, let’s look distribution deaths country:","code":"## look at data  head(bunmd_demo) ## # A tibble: 6 × 6 ##         ssn bpl_string death_age byear dyear age_first_application ##       <int> <fct>          <int> <int> <int>                 <int> ## 1 267729143 Cuba              89  1912  2002                    49 ## 2 266172087 Cuba              80  1911  1991                    57 ## 3 590072321 Cuba              92  1911  2004                    69 ## 4 265064566 Cuba              76  1913  1989                    53 ## 5 265877097 Cuba              86  1908  1995                    70 ## 6 264745485 Cuba              87  1915  2003                    46 ## how many people per country?  bunmd_demo %>%   count(bpl_string) ## # A tibble: 6 × 2 ##   bpl_string            n ##   <fct>             <int> ## 1 Native Born White 20000 ## 2 Cuba              13194 ## 3 England            7561 ## 4 Italy             15306 ## 5 Mexico            13755 ## 6 Poland            11186 ## distribution of deaths? ggplot(data = bunmd_demo) +    geom_density(aes(x = death_age),                  fill = \"grey\",                  color = \"black\",                  binwidth = 1) +    cowplot::theme_cowplot() +    labs(x = \"Age of Death\",        y = \"Density\") +    facet_wrap(~bpl_string) ## Warning: Ignoring unknown parameters: binwidth"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"linear-regression-apporach","dir":"Articles","previous_headings":"Case Study II: Real-World Example with BUNMD Data","what":"Linear regression apporach","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"Let’s look association country origin longevity. First, ’ll try using old approach (linear regression age death). Now, ’ll try new Gompertz MLE parametric approach:","code":"## run linear model  lm_bpl <- lm(death_age ~ bpl_string + as.factor(byear), data = bunmd_demo)  ## extract coefficients from model  lm_bpl_tidy <- tidy(lm_bpl) %>%   filter(str_detect(term, \"bpl_string\")) %>%   mutate(term = prefix_strip(term, \"bpl_string\"))  ## rename variables  lm_bpl_tidy <- lm_bpl_tidy %>%   mutate(     e65 = estimate,     e65_lower = estimate - 1.96 * std.error,     e65_upper = estimate + 1.96 * std.error   ) %>%   rename(country = term) %>%   mutate(method = \"Regression on Age of Death\") ## Gompertz Trunc  ## Use 1988-2005 because we are using BUNMD  gompert_mle_results <- gompertz_mle(formula = death_age ~ bpl_string,                                      left_trunc = 1988,                                     right_trunc = 2005,                                     data = bunmd_demo)  ## convert to e65 ## use model estimates — but can also set other defaults for Gompertz M and B.  mle_results <- convert_hazards_to_ex(gompert_mle_results$results, use_model_estimates = T)  ## tidy up results  mle_results <- mle_results %>%    rename(country = parameter) %>%   filter(str_detect(country, \"bpl_string\")) %>%   mutate(country = prefix_strip(country, \"bpl_string\")) %>%   mutate(method = \"Gompertz Parametric Estimate\")  ## look at results  mle_results ## # A tibble: 5 × 11 ##   country   coef coef_lower coef_upper    hr hr_lower hr_upper   e65 e65_lower ##   <chr>    <dbl>      <dbl>      <dbl> <dbl>    <dbl>    <dbl> <dbl>     <dbl> ## 1 Cuba    -0.229     -0.270    -0.188  0.796    0.764    0.829 1.70      1.39  ## 2 England -0.130     -0.179    -0.0815 0.878    0.836    0.922 0.960     0.597 ## 3 Italy   -0.178     -0.217    -0.138  0.837    0.805    0.871 1.31      1.02  ## 4 Mexico  -0.369     -0.412    -0.325  0.692    0.662    0.723 2.77      2.44  ## 5 Poland  -0.185     -0.229    -0.141  0.831    0.795    0.869 1.37      1.04  ## # … with 2 more variables: e65_upper <dbl>, method <chr>"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"visualize-results","dir":"Articles","previous_headings":"Case Study II: Real-World Example with BUNMD Data","what":"Visualize Results","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"Compare estimates ‘unbiased’ Gompertz MLE method old ‘biased’ method, regression age death.","code":"## combine results from both models  bpl_results <- lm_bpl_tidy %>%   bind_rows(mle_results)  ## Calculate adjustment factor (i.e., how much bigger are Gompertz MLE results) adjustment_factor <- bpl_results %>%    select(country, method, e65) %>%   pivot_wider(names_from = method, values_from = e65) %>%   mutate(adjustment_factor = `Gompertz Parametric Estimate` / `Regression on Age of Death`) %>%   summarize(adjustment_factor_mean = round(mean(adjustment_factor), 3)) %>%   as.vector()  ## Plot results bpl_results %>%   bind_rows(mle_results) %>%   ggplot(aes(y = reorder(country, e65), x = e65, xmin = e65_lower, xmax = e65_upper, color = method)) +   geom_pointrange(position = position_dodge(width = 0.2), shape = 1) +   cowplot::theme_cowplot(font_size = 12) +   geom_vline(xintercept = 0, linetype = \"dashed\") +   theme(legend.position = \"bottom\", legend.title = element_blank()) +   labs(     x = \"Estimate\",     title = \"Foreign-Born Male Ages at Death, BUNMD 1905-1914\",     y = \"\",     subtitle = paste0(\"Gompertz MLE estimates are ~\", adjustment_factor, \" times larger than regression on age of death\")   ) +   scale_color_brewer(palette = \"Set1\") +   annotate(\"text\", label = \"Native Born Whites\", x = 0.1, y = 3, angle = 90, size = 3, color = \"black\")"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"case-study-iii-education-and-longevity","dir":"Articles","previous_headings":"","what":"Case Study III: Education and longevity","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"third case study, look association education homeownership. CenSoc-DMF demo dataset, three covariates: educ_yrs: years education urban: urban (1) vs. rural (0) ownhome: home (1) rented N/(0) Questions: ’s association 1-year increase education life expectancy 65 (e65)? people homes live longer rent? , every additional year education, hazard ratio falls 3.6%.","code":"## load in file  dmf_demo <- censoc_example  ## what's in the file?  head(dmf_demo) ##    id byear death_age educ_yrs urban ownhome ## 1:  1  1910        67       10     1       1 ## 2:  2  1910        68        2     0       1 ## 3:  3  1910        77        8     0       1 ## 4:  4  1910        73       11     0       1 ## 5:  5  1910        87       12     1       0 ## 6:  6  1910        89       10     1       0 ## Example with only one cohort education_gradient <- gompertz_mle(formula = death_age ~ educ_yrs,                                     data = dmf_demo,                                    left_trunc = 1975 ,                                     right_trunc = 2005)  ## look at results  education_gradient$results   ## look at effect on e65 convert_hazards_to_ex(education_gradient$results, use_model_estimates = T) ## Example with only one cohort home_ownership <- gompertz_mle(formula = death_age ~ ownhome,                                     data = dmf_demo,                                    left_trunc = 1975 ,                                     right_trunc = 2005)  ## look at results  home_ownership$results   ## look at effect on e65 convert_hazards_to_ex(home_ownership$results, use_model_estimates = T)"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"person-weights","dir":"Articles","previous_headings":"","what":"Person-weights","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":"Gompertztrunc package can incorporate person-level weights.weight person corresponds estimated number persons target population person represents. Weights can help adjust differential representation. vector supplied weights must long data, weights must positive. example, simulate person-level weights. Imagine data perfectly representative population interest (men born 1910 dying doubly truncated window 1975-2005) one exception: people rented 1940 died age 90 half likely included dataset. adjust , can assign person rented 1940 died age 90 weight 2 everyone else dataset weight 1. new weights change substantive conclusions? Using new weights, see owning home longer now associated higher mortality rather lower mortality. matches prior, effectively added lots people dying old ages homes.","code":"## Simulate weights  dmf_demo <- dmf_demo %>%    mutate(pweight = case_when(     death_age > 90 & ownhome == 0 ~ 2,     TRUE ~ 1   ))  ## Run model without weights  homeownership_model <- gompertz_mle(formula = death_age ~ ownhome,                                     data = dmf_demo,                                    left_trunc = 1975 ,                                     right_trunc = 2005)  ## Rerun with weights  homeownership_model_weighted <- gompertz_mle(formula = death_age ~ ownhome,                                     data = dmf_demo,                                    left_trunc = 1975,                                     right_trunc = 2005,                                    weight = pweight)   ## Looks at results  homeownership_model$results ## # A tibble: 3 × 7 ##   parameter        coef coef_lower coef_upper     hr hr_lower hr_upper ##   <chr>           <dbl>      <dbl>      <dbl>  <dbl>    <dbl>    <dbl> ## 1 gompertz_b     0.0758     0.0745     0.0771 NA       NA       NA     ## 2 gompertz_mode 78.5       77.2       79.8    NA       NA       NA     ## 3 ownhome       -0.0615    -0.0800    -0.0429  0.940    0.923    0.958 ## Looks at weighted results  homeownership_model_weighted$results ## # A tibble: 3 × 7 ##   parameter        coef coef_lower coef_upper    hr hr_lower hr_upper ##   <chr>           <dbl>      <dbl>      <dbl> <dbl>    <dbl>    <dbl> ## 1 gompertz_b     0.0608     0.0593     0.0624 NA       NA       NA    ## 2 gompertz_mode 80.3       78.5       82.0    NA       NA       NA    ## 3 ownhome        0.159      0.137      0.182   1.17     1.15     1.20"},{"path":"https://caseybreen.github.io/gompertztrunc/articles/gompertztrunc_vignette.html","id":"summary-and-limitations","dir":"Articles","previous_headings":"","what":"Summary and Limitations","title":"Analyzing doubly-truncated mortality data using the gompertztrunc package","text":" package can used estimate mortality differentials without population denominators. limitations approach: Gompertz law apply perfectly application, major departures either assumption may bias estimates. approach generally requires larger sample sizes produce reliable estimates. approach assumes proportional hazards: survival curves different strata hazard functions proportional time.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Casey Breen. Author, maintainer. Maria Osborne. Author. Joshua R. Goldstein. Author.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Breen C, Osborne M, Goldstein J (2022). gompertztrunc: gompertztrunc: Tools estimating. R package version 0.1.0, https://caseybreen.github.io/gompertztrunc.","code":"@Manual{,   title = {gompertztrunc: gompertztrunc: Tools for estimating},   author = {Casey Breen and Maria Osborne and Joshua R. Goldstein},   year = {2022},   note = {R package version 0.1.0},   url = {https://caseybreen.github.io/gompertztrunc}, }"},{"path":[]},{"path":"https://caseybreen.github.io/gompertztrunc/readme.html","id":"about-the-package-under-development","dir":"","previous_headings":"","what":"About the package (under development)","title":"gompertztrunc","text":"gompertztrunc R package estimating Gompertz distributions doubly-truncated data using maximum likelihood estimation. install package:","code":"install.packages(\"devtools\") devtools::install_github(\"caseybreen/gompertztrunc\")"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/bM2a.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper functions — bM2a","title":"Helper functions — bM2a","text":"Helper functions","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/bM2a.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper functions — bM2a","text":"","code":"bM2a(b, M)"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/bunmd_demo.html","id":null,"dir":"Reference","previous_headings":"","what":"Demo BUNMD Data Set — bunmd_demo","title":"Demo BUNMD Data Set — bunmd_demo","text":"data set containing sample CenSoc Berkeley Unified Numident Mortality Database (BUNMD) file, including age death select covariates.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/bunmd_demo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Demo BUNMD Data Set — bunmd_demo","text":"","code":"bunmd_demo"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/bunmd_demo.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Demo BUNMD Data Set — bunmd_demo","text":"data frame 81,002 rows 6 variables: ssn Social security number bpl_string Country birth death_age Age death (integer years) byear Calender year birth dyear Calender year death age_first_application Age first social security application","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/censoc_example.html","id":null,"dir":"Reference","previous_headings":"","what":"Example CenSoc Data Set — censoc_example","title":"Example CenSoc Data Set — censoc_example","text":"data set containing age death select covariates sample men born 1910.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/censoc_example.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example CenSoc Data Set — censoc_example","text":"","code":"censoc_example"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/censoc_example.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example CenSoc Data Set — censoc_example","text":"data frame 100,000 rows 6 variables: id Individual-level identifier byear Calender year birth death_age Age death (integer years) educ_yrs Years education completed urban Residence urban area 1940 (0 = FALSE, 1 = TRUE) ownhome Homeowner (0 = FALSE, 1 = TRUE)","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/convert_hazards_to_ex.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert hazard ratios to life expectancy — convert_hazards_to_ex","title":"Convert hazard ratios to life expectancy — convert_hazards_to_ex","text":"Convert hazard ratios differences remaining life expectancy given age (defaults age 65)","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/convert_hazards_to_ex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert hazard ratios to life expectancy — convert_hazards_to_ex","text":"","code":"convert_hazards_to_ex(   df,   age = 65,   upper_age = 120,   M = 80,   b = 0.075,   use_model_estimates = F )"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/convert_hazards_to_ex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert hazard ratios to life expectancy — convert_hazards_to_ex","text":"df dataframe results given gompertz_mle() function age age calculate remaining life expectancy upper_age maximal age use life table calculation M Gompertz parameter modal age death b Gompertz mortality slope parameter use_model_estimates use estimates Gompertz Parameters model, rather defaults","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/convert_hazards_to_ex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert hazard ratios to life expectancy — convert_hazards_to_ex","text":"dataframe hazards ratios corresponding e(x) estimates confidence intervals","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/get.par.start.html","id":null,"dir":"Reference","previous_headings":"","what":"Get starting values for parameters — get.par.start","title":"Get starting values for parameters — get.par.start","text":"Uses linear modeling compute initial values MLE optimizer","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/get.par.start.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get starting values for parameters — get.par.start","text":"","code":"get.par.start(formula, data)"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/get.par.start.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get starting values for parameters — get.par.start","text":"formula estimation formula data data matrix y, u, l, covariates, including cohort","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/get.par.start.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get starting values for parameters — get.par.start","text":"Named vector initial parameter estimates","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertz_mle.html","id":null,"dir":"Reference","previous_headings":"","what":"Gompertz MLE function — gompertz_mle","title":"Gompertz MLE function — gompertz_mle","text":"Fits truncated Gompertz distribution proportional hazards mortality data using maximum likelihood estimation.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertz_mle.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gompertz MLE function — gompertz_mle","text":"","code":"gompertz_mle(   formula,   right_trunc = 2005,   left_trunc = 1975,   data,   byear = byear,   lower_bound = NULL,   upper_bound = NULL,   weights = NULL,   maxiter = 10000 )"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertz_mle.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gompertz MLE function — gompertz_mle","text":"formula estimation formula right_trunc right truncation year byear year birth lower_bound lowest age death (optional) upper_bound highest age death (optional) weights optional vector weights maxiter maximum number iterations optimizer left_truc left truncation year","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertz_mle.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gompertz MLE function — gompertz_mle","text":"Returns named list consisting following components (See stats::optim additional details): starting_values list starting values paramters estimated optim_fit list consisting : par best estimation parameter values value log likelihood counts number calls funcation gradient convergence returns 0 model converged message information returned optimizer hessian Hessian matrix  results table estimates upper/lower bounds","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertztrunc_simu.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate Gompertzian death distribution — gompertztrunc_simu","title":"Simulate Gompertzian death distribution — gompertztrunc_simu","text":"Simulate Gompertzian death distribution","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertztrunc_simu.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate Gompertzian death distribution — gompertztrunc_simu","text":"","code":"gompertztrunc_simu(   n,   formula,   coefs,   dummy = NULL,   sigma = NULL,   seed = NULL,   a0 = 10^-4,   b = 1/10,   verbose = FALSE )"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertztrunc_simu.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate Gompertzian death distribution — gompertztrunc_simu","text":"n sample size formula estimation formula coefs named vactors coefficients corresponding true values dummy vector flags coefficient sigma standard deviation variable seed random seed duplicate data a0 Gompertz alpha parameter b Gompertz b parameter verbose print internal check true","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertztrunc_simu.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate Gompertzian death distribution — gompertztrunc_simu","text":"data frame simulated death ages covariate values","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/gompertztrunc_simu.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate Gompertzian death distribution — gompertztrunc_simu","text":"","code":"gompertztrunc_simu(n=1000, formula = death_age ~ sex + edu, coefs = c('sex'=-0.8, 'ambient_temp'=0.3), dummy=c(T,F)) #> Error in gompertztrunc_simu(n = 1000, formula = death_age ~ sex + edu,     coefs = c(sex = -0.8, ambient_temp = 0.3), dummy = c(T, F)): term labels not correct. should be: sex edu"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/hazard_ratio_to_le.html","id":null,"dir":"Reference","previous_headings":"","what":"Translate a single hazard ratio to life expectancy — hazard_ratio_to_le","title":"Translate a single hazard ratio to life expectancy — hazard_ratio_to_le","text":"Translate single hazard ratio life expectancy","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/hazard_ratio_to_le.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Translate a single hazard ratio to life expectancy — hazard_ratio_to_le","text":"","code":"hazard_ratio_to_le(lower, upper, hr, M = 80, b = 0.1)"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/hazard_ratio_to_le.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Translate a single hazard ratio to life expectancy — hazard_ratio_to_le","text":"lower lower age bound upper upper age bound hr hazard ratio M Gompertz modal age death parameter b Gompertz mortality slope parameter","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/hazard_ratio_to_le.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Translate a single hazard ratio to life expectancy — hazard_ratio_to_le","text":"hazard ratio converted effect e65","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/mll.gomp.multi.cohort.cov.html","id":null,"dir":"Reference","previous_headings":"","what":"Gompertz mle function — mll.gomp.multi.cohort.cov","title":"Gompertz mle function — mll.gomp.multi.cohort.cov","text":"Gompertz mle function","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/mll.gomp.multi.cohort.cov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gompertz mle function — mll.gomp.multi.cohort.cov","text":"","code":"mll.gomp.multi.cohort.cov(p, A, predictors = predictors)"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/mll.gomp.multi.cohort.cov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gompertz mle function — mll.gomp.multi.cohort.cov","text":"p initialization function data matrix covariates y, u, l, covariates, including cohort","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/mll.gomp.multi.cohort.cov.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gompertz mle function — mll.gomp.multi.cohort.cov","text":"None","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/negLL_function.html","id":null,"dir":"Reference","previous_headings":"","what":"Gompertz Negative Log Likelihood Function — negLL_function","title":"Gompertz Negative Log Likelihood Function — negLL_function","text":"Computes negative log likelihood optimizer","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/negLL_function.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gompertz Negative Log Likelihood Function — negLL_function","text":"","code":"negLL_function(par, y, X, y.left, y.right, wt)"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/negLL_function.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gompertz Negative Log Likelihood Function — negLL_function","text":"par vector parameter estimates y vector death ages X model matrix y.left left truncation age y.right right trunction age wt weight","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/negLL_function.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gompertz Negative Log Likelihood Function — negLL_function","text":"negative log likelihood parameter estimates given observed data","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe — %>%","title":"Pipe — %>%","text":"Put description See magrittr::%>% details.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe — %>%","text":"lhs, rhs specify lhs rhs lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe — %>%","text":"result calling `rhs(lhs)`.","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/pipe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Pipe — %>%","text":"","code":"# some examples if you want to highlight the usage in the package"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/sim_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated mortality data set — sim_data","title":"Simulated mortality data set — sim_data","text":"data set containing simulated age death covariates according truncated Gompertz distribution proportional hazards","code":""},{"path":"https://caseybreen.github.io/gompertztrunc/reference/sim_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulated mortality data set — sim_data","text":"","code":"sim_data"},{"path":"https://caseybreen.github.io/gompertztrunc/reference/sim_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated mortality data set — sim_data","text":"data frame 6732 rows 6 variables: aod Age death, integer years byear Calender year birth dyear Calender year death temp Temperature sex Sex (0 = male, 1 = female) isSouth Live south (0 = FALSE, 1 = TRUE)","code":""}]
